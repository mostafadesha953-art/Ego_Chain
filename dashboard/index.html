<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>EgoChain Sovereign Core | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        :root { --gold: #d4af37; --dark: #050505; --card: #121212; --green: #25d366; --danger: #ff4b2b; --blue: #007bff; }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 280px; background: var(--card); border-left: 1px solid #222; display: flex; flex-direction: column; padding: 20px; z-index: 100; }
        .nav-link { padding: 12px; margin: 5px 0; border-radius: 8px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; color: #888; font-size: 14px; }
        .nav-link:hover, .nav-link.active { background: #1a1a1a; color: var(--gold); }
        .nav-link i { margin-left: 12px; width: 18px; }
        .auth-panel { background: #0a0a0a; padding: 15px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        input, select, textarea { width: 100%; padding: 10px; margin: 5px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 6px; font-size: 12px; box-sizing: border-box; }
        .btn-sm { flex: 1; padding: 8px; font-size: 11px; font-weight: bold; border-radius: 5px; cursor: pointer; border: none; }
        .main-content { flex: 1; padding: 30px; overflow-y: auto; position: relative; }
        .viewport { display: none; }
        .viewport.active { display: block; animation: fadeIn 0.5s; }
        .card { background: var(--card); padding: 25px; border-radius: 15px; border: 1px solid #222; margin-bottom: 20px; position: relative; }
        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px; }
        .asset-card { text-align: center; border-bottom: 3px solid var(--gold); }
        .asset-val { font-size: 22px; font-weight: bold; color: var(--gold); margin: 5px 0; }
        .asset-usdt { font-size: 12px; color: #888; }
        .buy-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .btn-buy { padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; color: #000; width: 100%; }
        .btn-buy.aura { background: var(--gold); }
        .btn-buy.jewel { background: var(--green); }
        .btn-buy:hover { filter: brightness(1.2); transform: translateY(-2px); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        #halt-screen { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; color:var(--danger); flex-direction:column; justify-content:center; align-items:center; text-align:center; }
    </style>
</head>
<body>

    <div id="halt-screen"><i class="fas fa-radiation fa-5x"></i><h1>NETWORK HALTED</h1><p>ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ø¯ÙˆØ§Ø¹ÙŠ Ø£Ù…Ù†ÙŠØ©</p></div>

    <div class="sidebar">
        <div class="nav-link active" onclick="app.view('home')" style="background: #1a1a1a; color: var(--gold); margin-bottom: 20px; border: 1px solid var(--gold);">
            <i class="fas fa-home"></i> Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </div>

        <div class="auth-panel">
            <input type="text" id="auth-id" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ">
            <input type="password" id="auth-pass" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ">
            <input type="password" id="auth-key" placeholder="Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ (Ø§Ù„ØªÙˆÙ‚ÙŠØ¹)">
            <div style="display: flex; gap: 5px; margin-top: 10px;">
                <button class="btn-sm" style="background: var(--blue); color: #fff;" onclick="app.generateWallet()">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ÙØ¸Ø©</button>
                <button class="btn-sm" style="background: var(--gold); color: #000;" onclick="app.login()">Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>

        <div class="nav-link" onclick="app.view('wallet')"><i class="fas fa-wallet"></i> Ù…Ø­ÙØ¸ØªÙŠ ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø©</div>
        <div class="nav-link" onclick="app.view('factory')"><i class="fas fa-microchip"></i> Ù…ØµÙ†Ø¹ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø­Ø±Ø©</div>
        <div style="margin-top: auto;">
            <button onclick="triggerKill()" style="background:var(--danger); color:white; border:none; padding:10px; width:100%; border-radius:5px; cursor:pointer;">
                <i class="fas fa-power-off"></i> Ø²Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
            </button>
        </div>
    </div>

    <div class="main-content">
        <div id="view-home" class="viewport active">
            <div class="card" style="border-right: 4px solid var(--gold);">
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ EgoChain Sovereign</h2>
                <p style="color: #aaa;">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª (BIT/LIT/ETH/XMR).</p>
                <div class="buy-grid">
                    <div class="card asset-card">
                        <h4>Aura (AURA)</h4>
                        <div class="asset-val">0.63 USDT</div>
                        <button class="btn-buy aura" onclick="app.buyAsset('AURA', 0.63)">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ù€ USDT</button>
                    </div>
                    <div class="card asset-card">
                        <h4>Jewel (JWL)</h4>
                        <div class="asset-val">0.45 USDT</div>
                        <button class="btn-buy jewel" onclick="app.buyAsset('JEWEL', 0.45)">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ù€ USDT</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-wallet" class="viewport">
            <div class="card">
                <h3><i class="fas fa-coins"></i> Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
                <div class="stat-grid">
                    <div class="card asset-card">
                        <small>Ø¹Ù…Ù„Ø© AURA</small>
                        <div class="asset-val" id="bal-aura">0.00</div>
                        <div id="val-aura-usdt" class="asset-usdt">â‰ˆ 0.00 USDT</div>
                    </div>
                    <div class="card asset-card">
                        <small>Ø¹Ù…Ù„Ø© JEWEL</small>
                        <div class="asset-val" id="bal-jewel">0.00</div>
                        <div id="val-jewel-usdt" class="asset-usdt">â‰ˆ 0.00 USDT</div>
                    </div>
                    <div class="card asset-card">
                        <small>Ø±ØµÙŠØ¯ USDT</small>
                        <div class="asset-val" id="bal-usdt">0.00</div>
                        <div class="asset-usdt">Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„ÙˆØ³ÙŠØ·Ø©</div>
                    </div>
                </div>
                <hr style="border:0; border-top:1px solid #333; margin: 20px 0;">
                <input type="text" id="tx-to" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªÙ„Ù… EGO_...">
                <input type="number" id="tx-amt" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§">
                <button class="btn-buy aura" onclick="app.sendTx()">ØªÙˆÙ‚ÙŠØ¹ ÙˆØ¥Ø±Ø³Ø§Ù„ (Ø¨Ù…ÙØªØ§Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹)</button>
            </div>
        </div>

        <div id="view-factory" class="viewport">
            <div class="card">
                <h3><i class="fas fa-plus-square"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¯ Ø°ÙƒÙŠ (ØªÙˆÙ„ÙŠØ¯ Ø°Ø§ØªÙŠ)</h3>
                <input type="text" id="contract-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø¯ / Ø§Ù„Ø£ØµÙ„">
                <textarea id="contract-body" style="height:120px; background:#000; color:var(--green); border:1px solid #333; border-radius:8px;" placeholder="Ø³ÙŠØ¸Ù‡Ø± ÙƒÙˆØ¯ Ø§Ù„Ø¹Ù‚Ø¯ Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ØªÙˆÙ„ÙŠØ¯..."></textarea>
                <button class="btn-buy jewel" style="margin-top:10px;" onclick="app.deployContract()">ØªÙˆÙ„ÙŠØ¯ ÙˆØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø¯ ÙÙˆØ±Ø§Ù‹</button>
            </div>
        </div>
    </div>

   <script>
    // --- 1. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø°ÙƒÙŠ (Hybrid Bridge) ---
    // Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠÙ…Ù†Ø¹ ØªØ¬Ù…Ø¯ Ø§Ù„ØµÙØ­Ø© ÙˆÙŠØ­ÙˆÙ„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ù„Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø°Ø§ ÙƒÙ†Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
    let ipc;
    try {
        if (window.require) {
            ipc = window.require('electron').ipcRenderer;
            console.log("âœ… ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬: Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Electron Ù†Ø´Ø·");
        } else {
            throw new Error("Not in Electron");
        }
    } catch (e) {
        // Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„Ù…ØªØµÙØ­ (Netlify) Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        ipc = {
            send: (channel, data) => {
                console.log([Ø¥Ø´Ø§Ø±Ø© Ø³Ø­Ø§Ø¨ÙŠØ©]: ${channel}, data);
                if(channel === 'initiate-buy') {
                    setTimeout(() => alert(âœ… ØªÙ… Ø´Ø±Ø§Ø¡ ${data.amount} ${data.asset} Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ø¨Ø± Ø§Ù„Ø³Ø­Ø§Ø¨Ø©!), 500);
                }
            },
            on: (channel, func) => console.log([Ù…Ø±Ø§Ù‚Ø¨Ø©]: ${channel})
        };
        console.log("ğŸŒ ÙˆØ¶Ø¹ Ø§Ù„ÙˆÙŠØ¨: Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¹Ù…Ù„ Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©");
    }

    // --- 2. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø±ØµØ¯Ø© ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± ---
    const PRICES = { AURA: 0.63, JEWEL: 0.45 };
    const app = {
        balances: { AURA: 1000.00, JEWEL: 5000.00, USDT: 100.00 }, // Ø±ØµÙŠØ¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„ØªØ¬Ø±Ø¨Ø©

        view: (id) => {
            document.querySelectorAll('.viewport').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById('view-' + id).classList.add('active');
            // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ active Ù„Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ ØªÙ… Ø¶ØºØ·Ù‡
            event.currentTarget.classList.add('active');
        },

        login: () => {
            const id = document.getElementById('auth-id').value;
            if(!id) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø£Ùˆ Ù‡Ø§ØªÙÙƒ");
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø´Ø¨ÙƒØ© EgoChain âœ“");
            app.updateUI();
        },

        generateWallet: () => {
            const key = document.getElementById('auth-key').value;
            if(!key) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ 'Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ' Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªÙˆÙ„ÙŠØ¯ Ù‡ÙˆÙŠØªÙƒ");
            alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ÙØ¸ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø±Ù‚Ù…ÙŠ.");
        },

        buyAsset: (asset, price) => {
            const amount = prompt(ÙƒÙ…ÙŠØ© ${asset} Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø³Ø¹Ø± ${price} USDT:);
            if(!amount || isNaN(amount)) return;
            const cost = amount * price;
            
            if(app.balances.USDT < cost) return alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø±ØµÙŠØ¯ USDT ØºÙŠØ± ÙƒØ§ÙÙ");
            
            app.balances.USDT -= cost;
            app.balances[asset] += parseFloat(amount);
            app.updateUI();
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø± Ù„Ù„Ø³Ø­Ø§Ø¨Ø©/Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
            ipc.send('initiate-buy', { asset, amount, cost });
        },

        sendTx: () => {
            const key = document.getElementById('auth-key').value;
            if(!key) return alert("âš ï¸ Ø®Ø·Ø£: ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 'Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ' Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©");
            alert("Ø¬Ø§Ø±ÙŠ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¹Ø¨Ø± Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª XMR/ETH...");
        },

        deployContract: () => {
            const name = document.getElementById('contract-name').value;
            const key = document.getElementById('auth-key').value;
            if(!name || !key) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø¯ ÙˆØ§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ");
            
            const contract = {
                id: "SC-" + Math.random().toString(36).substr(2,9).toUpperCase(),
                name: name,
                signature: btoa(key),
                dna: ["BIT", "LIT", "ETH", "XMR"],
                timestamp: new Date().toISOString()
            };
            document.getElementById('contract-body').value = JSON.stringify(contract, null, 2);
            ipc.send('sync-new-contract', contract);
            alert("âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙˆØªØ´ÙÙŠØ± Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
        },

        updateUI: () => {
            document.getElementById('bal-aura').innerText = app.balances.AURA.toLocaleString();
            document.getElementById('bal-jewel').innerText = app.balances.JEWEL.toLocaleString();
            document.getElementById('bal-usdt').innerText = app.balances.USDT.toFixed(2);
            document.getElementById('val-aura-usdt').innerText = â‰ˆ ${(app.balances.AURA * PRICES.AURA).toLocaleString()} USDT;
            document.getElementById('val-jewel-usdt').innerText = â‰ˆ ${(app.balances.JEWEL * PRICES.JEWEL).toLocaleString()} USDT;
        }
    };

    function triggerKill() {
        if(confirm("ØªØ­Ø°ÙŠØ±: Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙØ¹ÙŠÙ„ Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø´Ø¨ÙƒØ©ØŸ")) {
            ipc.send('global-halt-initiate');
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù...");
        }
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    window.onload = () => app.updateUI();
</script>
</body>
</html>

