<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>EgoChain Sovereign | Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        :root { --gold: #d4af37; --dark: #050505; --card: #121212; --green: #25d366; --danger: #ff4b2b; }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 280px; background: var(--card); border-left: 1px solid #222; display: flex; flex-direction: column; padding: 20px; }
        .nav-link { padding: 12px; margin: 5px 0; border-radius: 8px; cursor: pointer; display: flex; align-items: center; color: #888; font-size: 14px; border: 1px solid transparent; transition: 0.3s; }
        .nav-link.active { background: #1a1a1a; color: var(--gold); border-color: var(--gold); }
        .auth-panel { background: #0a0a0a; padding: 15px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        input { width: 100%; padding: 10px; margin: 5px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 6px; font-size: 11px; box-sizing: border-box; }
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .viewport { display: none; }
        .viewport.active { display: block; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #222; margin-bottom: 20px; }
        .btn-gold { background: var(--gold); color: #000; font-weight: bold; border: none; padding: 12px; border-radius: 6px; cursor: pointer; width: 100%; }
        #user-tag { font-size: 10px; color: var(--green); text-align: center; margin-bottom: 10px; display: none; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2 style="color:var(--gold); text-align:center;">EGO CHAIN</h2>
        <div id="user-tag"><i class="fas fa-user-shield"></i> Ù…ØªØµÙ„: <span id="display-id"></span></div>
        
        <form onsubmit="return false;" class="auth-panel">
            <input type="text" id="in-id" placeholder="Ø§Ù„Ù‡ÙˆÙŠØ© (Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„/Ø§Ù„Ù‡Ø§ØªÙ)">
            <input type="password" id="in-pass" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ">
            <input type="password" id="in-key" placeholder="Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ (Ø§Ù„ØªÙˆÙ‚ÙŠØ¹)">
            <button class="btn-gold" style="margin-top:10px;" onclick="attemptLogin()">Ø¯Ø®ÙˆÙ„ Ø³ÙŠØ§Ø¯ÙŠ</button>
        </form>

        <div id="link-home" class="nav-link active" onclick="showPage('home')"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div id="link-wallet" class="nav-link" onclick="showPage('wallet')"><i class="fas fa-wallet"></i> Ù…Ø­ÙØ¸ØªÙŠ Ø§Ù„Ø®Ø§ØµØ©</div>
        <div id="link-factory" class="nav-link" onclick="showPage('factory')"><i class="fas fa-file-contract"></i> Ø¹Ù‚ÙˆØ¯ÙŠ Ø§Ù„Ù…Ø´ÙØ±Ø©</div>
    </div>

    <div class="main-content">
        <div id="page-home" class="viewport active">
            <div class="card">
                <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠØ©</h2>
                <p style="color:#888">ØªØµÙØ­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­ Ù„Ù„Ø¬Ù…ÙŠØ¹ØŒ Ù„ÙƒÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØªØ·Ù„Ø¨ ØªÙˆÙ‚ÙŠØ¹ Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø®Ø§Øµ.</p>
            </div>
        </div>

        <div id="page-wallet" class="viewport">
            <div class="card">
                <h3>Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                    <div class="card" style="text-align:center"><h4>AURA</h4><div id="u-aura" style="font-size:24px; color:var(--gold)">0.00</div></div>
                    <div class="card" style="text-align:center"><h4>USDT</h4><div id="u-usdt" style="font-size:24px; color:var(--green)">0.00</div></div>
                </div>
            </div>
        </div>

        <div id="page-factory" class="viewport">
            <div class="card">
                <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¯ Ø°ÙƒÙŠ Ø¬Ø¯ÙŠØ¯ (Private)</h3>
                <input type="text" id="c-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø¯">
                <button class="btn-gold" onclick="generatePrivateContract()">ØªÙˆÙ„ÙŠØ¯ ÙˆØ­ÙØ¸ ÙÙŠ Ø³Ø¬Ù„ÙŠ</button>
                <hr style="border:0; border-top:1px solid #333; margin:20px 0;">
                <div id="contracts-list" style="font-size:11px; color:#aaa;">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù‚ÙˆØ¯ ÙØ§Ø±Øº..</div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† ÙˆØ¬ÙˆØ¯Ù‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· ---
        function showPage(p) {
            const views = document.getElementsByClassName('viewport');
            for(let v of views) v.classList.remove('active');
            const links = document.getElementsByClassName('nav-link');
            for(let l of links) l.classList.remove('active');
            
            document.getElementById('page-' + p).classList.add('active');
            document.getElementById('link-' + p).classList.add('active');
        }

        let session = { id: null, key: null };

        function attemptLogin() {
            const id = document.getElementById('in-id').value;
            const pass = document.getElementById('in-pass').value;
            const key = document.getElementById('in-key').value;
            
            if(!id || !key) return alert("Ø§Ù„Ù…Ø¹Ø±Ù ÙˆØ§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ Ù…Ø·Ù„ÙˆØ¨Ø§Ù†!");
            
            session = { id, key };
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ Electron
            try {
                if (window.require) {
                    const ipc = window.require('electron').ipcRenderer;
                    ipc.send('request-secure-login', { id, pass, key });
                } else {
                    alert("âœ… ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (Netlify): Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·.");
                    document.getElementById('user-tag').style.display = 'block';
                    document.getElementById('display-id').innerText = id;
                }
            } catch(e) { console.log("Web mode active"); }
        }

        function generatePrivateContract() {
            if(!session.id) return alert("Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹!");
            const name = document.getElementById('c-name').value;
            if(!name) return alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø¯");
            alert("ğŸ”’ ØªÙ… ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø¯ Ø¨Ø§Ø³Ù…: " + session.id);
        }

        // --- 2. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Electron (Ù…Ø­Ù…ÙŠ Ø¯Ø§Ø®Ù„ try-catch) ---
        try {
            if (window.require) {
                const ipc = window.require('electron').ipcRenderer;
                ipc.on('login-success', (event, data) => {
                    document.getElementById('user-tag').style.display = 'block';
                    document.getElementById('display-id').innerText = session.id;
                    document.getElementById('u-aura').innerText = data.balances.AURA.toLocaleString();
                    document.getElementById('u-usdt').innerText = data.balances.USDT.toFixed(2);
                });
            }
        } catch(e) { console.log("Electron bridge not available in browser"); }
    </script>
</body>
</html>
