<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>EgoChain Open Source | منصة العقود الحرة</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        :root { --gold: #d4af37; --dark: #050505; --card: #121212; --green: #25d366; --danger: #ff4b2b; --blue: #007bff; }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; }
        
        /* Sidebar & Auth Panel */
        .sidebar { width: 280px; background: var(--card); border-left: 1px solid #222; display: flex; flex-direction: column; padding: 20px; }
        .auth-panel { background: #0a0a0a; padding: 15px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        input, select, textarea { width: 100%; padding: 10px; margin: 5px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 6px; font-size: 12px; box-sizing: border-box; }
        
        .btn-sm { flex: 1; padding: 8px; font-size: 11px; font-weight: bold; border-radius: 5px; cursor: pointer; border: none; transition: 0.3s; }
        .nav-link { padding: 12px; margin: 5px 0; border-radius: 8px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; color: #888; }
        .nav-link.active, .nav-link:hover { background: #1a1a1a; color: var(--gold); }

        /* Content Area */
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .viewport { display: none; }
        .viewport.active { display: block; }
        .card { background: var(--card); padding: 25px; border-radius: 15px; border: 1px solid #222; margin-bottom: 20px; }
        
        .btn-main { background: var(--gold); color: #000; font-weight: bold; border: none; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; }
        .btn-main:hover { filter: brightness(1.2); }
        .status-tag { font-size: 10px; text-align: center; margin-top: 8px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2 style="color: var(--gold); text-align: center;">EGO CHAIN</h2>
        
        <!-- نظام الدخول والإنشاء الجانبي -->
        <div class="auth-panel">
            <input type="text" id="auth-id" placeholder="البريد أو الهاتف">
            <input type="password" id="auth-pass" placeholder="الرقم السري">
            <input type="password" id="auth-key" placeholder="المفتاح السري (التوقيع)">
            
            <div style="display: flex; gap: 5px; margin-top: 10px;">
                <button class="btn-sm" style="background: var(--blue); color: #fff;" onclick="app.generateWallet()">إنشاء محفظة</button>
                <button class="btn-sm" style="background: var(--gold); color: #000;" onclick="app.login()">دخول</button>
            </div>
            <div id="user-status" class="status-tag" style="color: #666;">وضع الزائر: تصفح فقط</div>
        </div>

        <div class="nav-link active" onclick="app.view('home')"><i class="fas fa-globe"></i> استكشاف الشبكة</div>
        <div class="nav-link" onclick="app.view('factory')"><i class="fas fa-code"></i> إنشاء عقد ذكي</div>
        <div class="nav-link" onclick="app.view('wallet')"><i class="fas fa-wallet"></i> محفظتي</div>
    </div>

    <div class="main-content">
        
        <!-- واجهة الاستكشاف -->
        <div id="view-home" class="viewport active">
            <div class="card" style="border-right: 4px solid var(--gold);">
                <h3><i class="fas fa-chart-line"></i> حالة الندرة العالمية</h3>
                <p>سقف العملة الثابت: 21,000,000 | الضريبة التلقائية: 2.5%</p>
                <div style="background: #222; height: 10px; border-radius: 5px; overflow: hidden;">
                    <div style="width: 15%; height: 100%; background: var(--gold);"></div>
                </div>
            </div>
        </div>

        <!-- واجهة إنشاء العقود (مفتوحة بالكامل) -->
        <div id="view-factory" class="viewport">
            <div class="card">
                <h3><i class="fas fa-plus-square"></i> مصنع العقود المفتوحة</h3>
                <p style="font-size: 12px; color: #888;">يمكنك الآن رفع أصولك أو إنشاء عقودك دون وسيط. التوقيع يتم عبر مفتاحك السري.</p>
                
                <input type="text" id="contract-name" placeholder="اسم العقد / الأصل الرقمي">
                <select id="contract-type">
                    <option>إصدار عملة جديدة (Minting)</option>
                    <option>عقد بيع وشراء (Trade)</option>
                    <option>عقد تجميد سيولة (Staking)</option>
                </select>
                <textarea id="contract-body" placeholder="وصف العقد أو كود التعريف البرمجي..." style="height: 100px;"></textarea>
                
                <div id="factory-lock-msg" style="color: var(--danger); font-size: 11px; margin-bottom: 10px;">⚠️ يرجى تسجيل الدخول وإدخال المفتاح السري لتوقيع العقد.</div>
                
                <button id="deploy-btn" class="btn-main" disabled onclick="app.deployContract()">رفع العقد على البلوكتشين فوراً</button>
            </div>
        </div>

        <!-- واجهة المحفظة -->
        <div id="view-wallet" class="viewport">
            <div class="card">
                <h3><i class="fas fa-wallet"></i> إدارة أصول المحفظة</h3>
                <div id="wallet-lock-msg" style="color: var(--danger);">⚠️ سجل الدخول للوصول للأرصدة</div>
                <div id="wallet-content" style="display: none;">
                    <p>رصيدك الحالي: <b style="color: var(--gold);">0.00 AURA</b></p>
                    <hr border="0" style="border-top: 1px solid #333;">
                    <input type="text" placeholder="عنوان المستلم">
                    <input type="number" placeholder="الكمية">
                    <button class="btn-main" onclick="app.signTx()">توقيع وإرسال</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        const app = {
            isLoggedIn: false,

            view: (id) => {
                document.querySelectorAll('.viewport').forEach(v => v.classList.remove('active'));
                document.getElementById('view-' + id).classList.add('active');
            },

            login: () => {
                const id = document.getElementById('auth-id').value;
                const pass = document.getElementById('auth-pass').value;
                if(!id || !pass) return alert("أدخل بيانات الدخول");
                
                app.isLoggedIn = true;
                document.getElementById('user-status').innerText = "تم الدخول ✓";
                document.getElementById('user-status').style.color = "var(--green)";
                app.unlock();
            },

            generateWallet: () => {
                const key = document.getElementById('auth-key').value;
                if(!key) return alert("يجب إدخال المفتاح السري ليكون هو 'توقيعك الرقمي' للعقود");
                alert("تم إنشاء محفظتك بنجاح. مفتاحك السري هو هويتك، لا تشاركه مع أحد.");
            },

            unlock: () => {
                document.getElementById('deploy-btn').disabled = false;
                document.getElementById('factory-lock-msg').style.display = 'none';
                document.getElementById('wallet-lock-msg').style.display = 'none';
                document.getElementById('wallet-content').style.display = 'block';
            },

            deployContract: () => {
                const key = document.getElementById('auth-key').value;
                if(!key) return alert("خطأ: التوقيع الرقمي (المفتاح السري) مطلوب لرفع العقد.");
                alert("جاري رفع العقد المفتوح على شبكة EgoChain... تم التنفيذ بنجاح.");
            }
        };
    </script>
</body>
</html>
