<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>EgoChain - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¯Ù…Ø¬ ÙˆØ§Ù„Ù…Ø·ÙˆØ± */
        body { font-family: 'Segoe UI', sans-serif; background: #0f0f0f; color: #e0e0e0; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { background: #1e1e1e; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 450px; text-align: center; border: 1px solid #333; }
        .ego-logo { font-size: 2.5rem; font-weight: bold; color: #38bdf8; text-shadow: 0 0 10px #38bdf8; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #121212; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; margin-top: 10px; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .hidden { display: none; }
        .card { background: #252525; padding: 15px; border-radius: 10px; margin-top: 15px; border: 1px solid #38bdf8; }
        .mining-text { font-family: monospace; color: #4ade80; font-size: 1.2rem; }
    </style>
</head>
<body>

<div class="container">
    <div class="ego-logo">EGO Chain</div>

    <!-- 1. Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginSection">
        <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h3>
        <p style="font-size: 11px; color: #888;">Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ: ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØ¯Ù‚ÙŠÙ‚</p>
        <input type="text" id="identifier" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (+20)">
        <input type="password" id="loginPass" placeholder="Ù…ÙØªØ§Ø­ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠ">
        <button class="btn-primary" onclick="handleLogin()">Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ù…Ø­ÙØ¸Ø©</button>
    </div>

    <!-- 2. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ† -->
    <div id="portalSection" class="hidden">
        <div class="card">
            <h3>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­Ù„ÙŠ (Ù‚ÙŠØ¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†)</h3>
            <div id="localMined" class="mining-text">0.00000000 EGO</div>
            <p>Ø³Ø±Ø¹Ø© Ø§Ù„Ù€ HASH: <span id="currentHash">--</span></p>
        </div>

        <div id="status-box" style="margin-top: 10px; font-size: 0.9rem;">
            Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ù‚Ù: <span id="lockStatus" style="color: #4ade80;">Ù…ÙØªÙˆØ­</span>
        </div>

        <button class="btn-primary" onclick="startMining()">ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† â›ï¸</button>
        <button class="btn-success" onclick="syncToNetwork()">Ø±ÙØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ù„Ù„Ø´Ø¨ÙƒØ© (Sync)</button>
        
        <hr style="border: 0.5px solid #333; margin: 20px 0;">

        <!-- Ù‚Ø³Ù… InstaPay -->
        <div style="border: 1px dashed #38bdf8; padding: 10px; border-radius: 8px;">
            <h4>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø¯ (InstaPay)</h4>
            <p style="font-size: 0.8rem;">Ø­ÙˆÙ„ 25 Ø¬Ù†ÙŠÙ‡ Ù„Ù€: <strong>ego-chain@instapay</strong></p>
            <input type="text" id="txnId" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù…Ø±Ø¬Ø¹ÙŠ">
            <button class="btn-primary" style="background: #4a148c;" onclick="verifyInstaPay()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„</button>
        </div>

        <!-- Ø²Ø± Ø§Ù„Ù‚ÙÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ -->
        <button class="btn-danger" id="lockBtn" onclick="triggerPermanentLock()" style="margin-top: 20px;">
            Ø¥ØºÙ„Ø§Ù‚ Ø³Ù‚Ù Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ù„Ø£Ø¨Ø¯ ğŸ”’
        </button>
    </div>
</div>

<script>
// --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---
let minedAmount = parseFloat(localStorage.getItem('mined')) || 0;
let isMining = false;

// --- ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
async function handleLogin() {
    const id = document.getElementById('identifier').value;
    if(id) {
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('portalSection').classList.remove('hidden');
        // Ù‡Ù†Ø§ ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ EgoWallet.createWallet Ù…Ù† Ù…Ù„Ù wallet-core.js
        console.log("Wallet created for:", id);
    } else {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    }
}

// --- Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù€ 95%) ---
function startMining() {
    if(isMining) return;
    isMining = true;
    document.getElementById('currentHash').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...";

    setInterval(() => {
        // Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: Ø¥Ø°Ø§ ØªÙ… ØªØ¹Ø¯ÙŠÙ† 95% ØªÙ‚Ù„ Ø§Ù„Ø³Ø±Ø¹Ø© Ø¥Ù„Ù‰ 0.0000005
        let currentTotalPercentage = 96; // Ù‚ÙŠÙ…Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        let speed = (currentTotalPercentage >= 95) ? 0.0000005 : 0.00005; 
        
        minedAmount += (speed / 3600); 
        document.getElementById('localMined').innerText = minedAmount.toFixed(ğŸ˜ + " EGO";
        document.getElementById('currentHash').innerText = speed.toFixed(7) + " H/s";
        localStorage.setItem('mined', minedAmount);
    }, 1000);
}

// --- Ø±ÙØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ù„Ù„Ø´Ø¨ÙƒØ© ---
async function syncToNetwork() {
    if(minedAmount <= 0) return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±ØµÙŠØ¯ Ù„Ø±ÙØ¹Ù‡");
    alert(ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø¯Ù…Ø¬ ${minedAmount.toFixed(8)} Ù…Ø¹ Ø¹Ù‚Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ EGO Chain...);
    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© Ø§Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©
    // await EgoWallet.syncMinedToNetwork();
}

// --- Ø§Ù„Ù‚ÙÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Kill Switch) ---
async function triggerPermanentLock() {
    const confirmLock = confirm("ØªØ­Ø°ÙŠØ±: Ù‚ÙÙ„ Ø§Ù„Ø³Ù‚Ù Ø³ÙŠÙ…Ù†Ø¹ Ø¥ØµØ¯Ø§Ø± Ø£ÙŠ Ø¹Ù…Ù„Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø£Ø¨Ø¯. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ");
    if (confirmLock) {
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù…Ù† Ù…Ù„Ù kill-switch.js
        // const success = await lockTokenSupplyForever("YOUR_TOKEN_ID");
        const success = true; // Ù…Ø­Ø§ÙƒØ§Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        
        if (success) {
            document.getElementById('lockStatus').innerText = "Ù…ØºÙ„Ù‚ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹";
            document.getElementById('lockStatus').style.color = "red";
            document.getElementById('lockBtn').disabled = true;
            document.getElementById('lockBtn').style.opacity = "0.5";
            alert("ØªÙ… Ù‚ÙÙ„ Ø§Ù„Ø³Ù‚Ù Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ.");
        }
    }
}

function verifyInstaPay() {
    const txn = document.getElementById('txnId').value;
    if(txn) alert("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ù…Ù„ÙŠØ© InstaPay...");
}
</script>

</body>
</html>
